---
layout: post
title: "Project Euler 421-440"
category: "solution"
tags: ["Project Euler", "solution"]
---
{% include JB/setup %}

#Warning: This page contains massive spoilers!

其实我还没有做完421-440。。。其中会有一些剧透。。。所以慎入。。。感觉我讲的不是很清楚。。。所以造成的危害会小一些？
##UPD:已经做完。。。

###421

简单题。。。对于每个p考虑有多少个n满足p|n^15+1，然后就是一个简单的方程，考虑对每个p求出原根，然后暴力解。。。如果有模板什么的。。。大概30min就够了吧。。。

###422

中难题。。。转轴缩放成xy=1，然后递推关系就显然了。。。对处理二次曲线的黑技术不是很熟。。。所以一开始没搞出来。。。后来转成x^2-y^2=1还是没能搞出通项。。。大概会这个技巧就很简单了。。。也不知道为啥只有这么点人过。。。

###423

中等题。。。应该是一个dp+容斥就好了。。。但是我一开始的做法是直接显式表达出来。。。然后推了很久。。。最后搞了一个很奇怪的方法。。。花了很长时间。。。rng_58好强。。。

###424

太神不会。。。本来是准备粘答案的。。。这题是usrbin唯一的summer break 前的没做的题。。。然后发现code.google.com上那个题解站不更了。。。啥时候有心情写一下吧。。。网上拉了个sgu上kakuro的代码。。。感觉直接手算有点麻烦。。。条件不好切入。。。

中等题。。。就是码就行了。。。然后我是照数字一个空一个空搜的。。。效率还行。。。#90的数据有25个空。。。所以结合一下手算吧。。。感觉多加点剪枝。。。改一改搜索顺序。。。有望每一个都能在1s内出解吧。。。懒得写了。。关于手算。。。切入点是那些两位数。。。然后结合一些kakuro的技巧。。。还是可以做的。。。


###425

手速题。。。好像有些trick需要仔细读题。。。rng_58!。。。翻和lyp聊天记录发现了一些有趣的东西。。。

###426

难题。。。426,427,428三连发。。。关于ball-box system好像有挺多文章的。。。但是我是在观察大量数据然后猜想，每个系统一旦独立。。。以后就没有关系了。。。所以时间复杂度应该是线性的。。。一开始优化了很久暴力。。。后来发现没啥效果。。。这个题一开始过的人挺多的。。。但是后来就变少了。。。和422差不多。。。

###427

难题。。。这题好像某段时间是和415一起的hardest problem。。。但是现在415过的人好像多了起来。。。感觉很神的样子。。。而且100人也到了100+天。。。首先通过和423差不多的方法搞到一个`O(n^2)`的dp，然后这个方程非常简单。。。可以通过观察系数的方法直接得到显式的表示。。。注意观察是不要把(n-1)^x展开。。。不然就很难发现规律。。。然后稍微化简一下。。。其实化简没啥难度。。。但是式子有点长。。。然后每个的复杂度大概就是`O(n/m)`，总的复杂度`O(nlogn)`。。。其实我觉得这个题也没有这么难。。。首先那个dp和423的想法差不多。。。然后那个观察系数。。。一开始我想直接算。。。然后就没有然后了。。。

###428

难题。。。这个东西叫Steiner Chain。。。虽然这个东西一看就是圆的反演。。。但是还是挺有难度的。。。常规思维都是找个切点反演。。。所以很难搞出这个题。。。应该设这个反演中心O。。。然后把两个圆反演成同心圆。。。这样子相切就很好处理了。。。其中解几部分算了挺长时间。。。应为要反演。。。所以分式很难化。。。结合手算和mathematica终于算出来了。。。最后的结论还是挺优美的。。。但是最后的数论处理也不是很简单。。。感觉筛法+暴力用时应该比那个`O(n^(2/3))`少。。。而且那个方法常数也挺大的。。。Anton Lunyov用时和开挂一样。。。不过有的人那个结论是找paper的。。。

###429

手速题。。。Gold medal!。。。发现这是我省选滚粗后一天做的题。。。然后为了找这张图。。。翻了和lyp的聊天记录。。。发现当年的一些东西。。。省选前pe的讲课。。。省选后的滚粗。。。的确省选滚粗还是改变了我很多吧。。。扯远了。。。。

###430

简单题。。。简单的期望。。。一个一个的算。。。中间的可以近似舍掉。。。当然好像可以直接展开再用插值直接算。。。其实还是有一些有趣的事情的。。。

###431

简单题。。。二分+积分。。。由于不会mathematica编程。。。所以积分都是自适应simpson算的。。。感觉没人权？

###432

中等题。。。好像做这题是我去THUSC时。。。当时晚上一看好像已经有3个人过了。。。于是没去想。。。这种数论函数的题一般都是很简单的。。。然后最后抄lyp的式子过了。。。

###433

太神不会。。。这道题好像挺多人是一天以上的brute-force做的。。。应该还有人直接拉答案吧。。。好像这是新题里面能很简单找到答案的一题。。。感觉过的人有点多。。。但好像有比较好的方法。。。好像grechnik是找paper然后发现了什么东西。。。但我找了没找到什么有意义的。。。TAOCP的volume 2上有对这个东西平均阶的分析感觉很难用到这题上。。。以前尝试写过暴力。。。但好像时间算错了。。。以为7hrs能跑完。。。发现后就被我按掉了。。。关于暴力。。。感觉直接做效率较低。。。但照树搜。。。很难记录下来。。。就得一次性跑完。。。再想一想吧。。。

难题。。。thread里各种欢乐。。。土豪秀优越。。。然后一群屌丝跑暴力。。。然后不写`O(n^2)`暴力的不超过5个的样子。。。但是能找到答案太煞风景了。。。#1的土豪直接买了篇paper其中有一些非常炫酷的结论。。。我这种屌丝看看TAOCP第一步就直接用概率的方法做了。。。妈蛋啥有用的都没有。。。然后#3的土豪直接用很多很多的电脑一起跑。。。非常屌。。。还有一些人叫一些人不要放弃治疗什么的。。。总之正解是十分屌的。。。好像还有一些小伙伴通过自己勤劳的双手得到了比较好的做法。。。grechnik成功的算到了10^8。。。感觉这样的范围就无解了。。。

然后讲讲我的做法。。。感谢土豪@sy2006帮我提供跑暴力的机器。。。（PS:438也是他跑的。。。然后还帮我发现了代码中的bug。。。首先考虑这个树。。。然后答案显然是每个树的子节点的总和。。。对于这个树我们列成表格。。。发现很多相邻的值是一样的。。。我们可以一起算。。。然后对于每一个数。。。只要存有多少段不同的值就可以了。。。实现是稍微注意能搞到段数乘上个`logn`的复杂度。。。具体有多少段呢。。。这是个非常有趣的问题。。。我打了10000一下的表。。。发现增长的速率非常诡异。。。很难用模型刻画。。。然后推测了一下最后大概有30N左右段。。。这样内存可能吃得消。。。然后我兴冲冲的码完了。。。发现10^6就已经1G了。。。而且增长非常的诡异。。。最后那个常数达到了70。。。这时候我找到了土豪的小伙伴。。。10G轻松不喘气。。。把我的代码跑完了。。。。然后就WA掉了。。。然后拼命的debug。。。找到了非常有趣的渐近公式`0.842765913n^2ln(n)+0.0653514258n^2`。。。然后突然发现上溢了。。。感觉自己脑子进翔了。。。然后就又艹了一遍小伙伴的电脑。。。把他搞得QQ没响应了。。。我慌张的以为他下线去睡觉了。。。然后他那手机水了会儿人人。。。然后就A了。。。大概10min&10G。。。非常的欢乐。。。正解待研究。。。

###434

中难题。。。其实我好像并不会。。。但是在oeis上搜了题中的某个数就会了。。。非常有趣的一个题。。。以及它的本质。。。计数还是很简单的。。。

###435

简单题。。。可以直接找循环节。。。但我直接算。。。花了点时间。。。所以就不算手速题了吧。。。summer break后的题好像都比较水。。。

###436

中等题。。。当时是凌晨2:00的题目。。。然后整个人昏昏欲睡。。。有时这种题目。。。然后就滚去睡觉了。。。其实就是概率密度函数算来算去。。。对这种东西不是很熟悉。。。方法比较土。。。所以算了很久。。。

###437

手速题。。。一个二次方程+原根判断。。。直接拉模板吧。。。但是first solver好像用了很高端的语言。。。这两个都有。。。二次方程连配方都不用。。。而且效率很高。。。然后就直接一句话过了。。。

###438

中难题。。。这种类似乱搞的题目不是很会。。。大概搞出线性规划的式子。。。然后不等式卡上下界。。。枚举。。。好像卡的紧可以直接得到解？。。。而且不等式好像也直接差分就行了。。。还可以把eps带到不等式里。。。但是我的界卡的很松。。。导致跑了30min才出解。。。而且发生里一些奇怪的事。。。

###439

简单题。。。这种题没啥难度。。。首先别看错题。。。这个d其实是sigma。。。然后我本想抄rng_58-WJMZBMR恒等式。。。然后比较麻烦。。。后来就直接做了。。。就是对每个因子p，分成和i的最大公约数和其他的。。。稍微化简一下。。。代码全部从415的代码中找就没了。。。然后关于题解引发了一点争论。。。我还是支持pe官方的做法的（天哪，我在做什么？）

###440

简单题。。。观察。。。由于要noip初赛。。。错过了这题。。。但是关于(c^a+1,c^b+1)观察了好久。。。这种东西都不知道。。。TAT。。。

###441

简单题。。。虽然已经写过了。。。补充一下。。。首先有个非常有趣的结论。。。那个结论thread上的证明非常麻烦且无趣。。。其实直接减一下就行了。。。然后这道题其实还可以用fft做2333333333

###summary
感觉有趣的题目不是很多428,434。。。也许426应该是挺有趣的。。。但是我是观察了很久才得到这个猜想。。。感觉我对乱搞题不是很会。。。离"High Flyer"差好多题。。。离"Perfection"差好多题。。。感觉不想搞OI的这段时间里我还是会去做pe。。。啥时候能跳出这个坑呢？从Jan 8,2013做起的。。。到Jan 8,2014会发生什么呢。。。做pe有给我带来什么呢。。。仅仅是对OI的回避和替代吗？

终于做完了"State Of The Art"，也就是把pe最近的题都做完了。。。pe先告一段落吧。。。但还是会保持做新题吧。。。感觉在Jan 8,2014前是肯定做不完了。。。也剩100+的题了。。。要补的话等下一次有空吧或是summer break吧。。。

也是迫于学业和竞赛压力。。。感觉大学会比中学更累。。。TAT。。。毕竟是不可能随心所欲过自己喜欢的生活吧。。。“这是什么道理我又凭什么被人主宰”。。。自我安慰吧。。。

接下来准备做TC的题吧。。。CF的题比较乱。。。难度也不齐。。。但还是更接近OI。。。现在对OI的题目都没啥感觉了。。。虽然知道不去做题是不行的。。。但对于一些题目。。。套模型+码代码实在提不起兴趣。。。但是比赛中还是不得不面对这样的题目。。。但是真的碰上一些有趣的题目。。。又做不出。。。代码题又写不出。。。就一点也没有优势了。。。就像noi2013day1一样。。。这样的题只拿了这么点分。。。而且还没有一次在比赛中做出过TC level3的题目。。。在这个游戏中就是要适应游戏规则。。。只是感觉有点格格不入。。。

TC level3还是挺不错的。。。但离OI还是远了点。。。感觉就是折中吧。。。只是有详细的题解和掉分机制。。。让我很难去好好地思考每一个题目。。。