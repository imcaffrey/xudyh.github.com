---
layout: post
title: "BZOJ 3237"
category: "solution"
tags: ["solution"]
---
{% include JB/setup %}

我是正经的题解

首先这个题可以分治搞，非常简单。

然后有一种随机化的做法，首先随便搞一棵生成树，然后非树边的权值随机，树边的权值为覆盖它的非树边权值的异或和。

这个正确性是不显然的。首先我们注意到这样搞和每个点xor和为0是充要的，可以用数学归纳法证明。于是就有一个结果对于任意生成树都满足上面这个性质。

然后考虑删除边集，假设边集为极小的能将全图割开。如果均为非树边，那么xor值为0的概率为1/w,w为随机数的范围。否则如果存在树边，如果不能割开，那么我们删除这些边搞一棵生成树，然后转化成非树边情况。如果能割开，那么我们先删除这些边，然后两个子集分别构造生成树，然后将边集中的边一条加入，那么使这个边集只有一条树边，其他都为非树边。因为树边的权值为覆盖它的非树边权值的异或和，而且这些非树边能两个点集分开，即为所有覆盖这条树边的非树边。所以异或和为0。

询问的时候显然可以枚举子集，如果子集大了，可以高斯消元。但如果太大就直接滚粗了。如果在0到2^w-1随机，一个不能割开的大小为v边集的被误判概率为(1-1/2^w)\*(1-1/2^{w-1})\*...\*(1-1/2^{w-v+1})。

所以我觉得结合Dynamic Connectivity算法能在log^2n内解决完全动态割边问题，但好像还是不能解决完全动态双联通问题。

为啥我写的这么正经？因为本来要写成钓鱼文的，后来想想算了。